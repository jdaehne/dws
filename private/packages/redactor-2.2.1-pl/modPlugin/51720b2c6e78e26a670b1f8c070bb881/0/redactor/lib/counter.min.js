if(!RedactorPlugins)var RedactorPlugins={};!function(a){a.fn.animateRotate=function(b,c,d,e,f){var g=a.speed(c,d,f),h=g.step;return this.each(function(c,d){g.complete=a.proxy(g.complete,d),g.step=function(b){if(a.style(d,"transform","rotate("+b+"deg)"),h)return h.apply(d,arguments)},a({deg:e}).animate({deg:b},g)})},RedactorPlugins.counter=function(){return{init:function(){function b(b){var d=0,e=0,f=b.code.get(),g=f.replace(/<\/(.*?)>/gi," ");if(g=g.replace(/<(.*?)>/gi,""),g=g.replace(/\t/gi,""),g=g.replace(/\n/gi,""),g=g.replace(/\r/gi,""),""!==(g=a.trim(g))){var h=g.split(/\s+/),i=g.match(/\s/g);h&&h.length,i&&(e=i.length),d=g.length}var j=b.opts.counterWPM||275,k=a(b.$editor).text().trim().split(/\s+/g).length,l=j/60,m=k/l,n=c(1e3*m),o="Estimated Read Time: ";n.hours&&(o+=n.hours.toString()+" "+(n.hours>1?"Hours ":"Hour ")),o+=n.minutes.toString()+" "+(n.minutes>1?"Minutes ":"Minute "),o+=n.seconds.toString()+" "+(n.seconds>1?"Seconds ":"Second ");var p=a(b.$editor).parent().children(".redactor_counter");p.find(".reading-time").text((n.hours?n.hours+":":"")+(n.minutes.toString().length<2?"0"+n.minutes.toString():n.minutes)+":"+(n.seconds.toString().length<2?"0"+n.seconds.toString():n.seconds)).parent().attr("title",o),p.find(".word-count").text(k.toLocaleString()+" words").parent().attr("title",d.toLocaleString()+" characters ("+Number(d-e).toLocaleString()+" non-space)");var q=m/3600*360;p.find(".icon-power-off").data("deg",q).animateRotate(q,180,"linear",p.find(".icon-power-off").data("deg"))}function c(a){var b,c,d,e,f;return b=a/1e3,c=Math.round(b%60),b/=60,d=Math.round(b%60),b/=60,e=Math.round(b%24),b/=24,f=Math.round(b),{days:f,hours:e,minutes:d,seconds:c}}a(this.$editor).after('<p class="redactor_counter" id="redactor_counter-'+this.uuid+'"><span class="time-wrap"><i class="icon icon-power-off"></i>&nbsp;<span class="reading-time"></span></span>&emsp;&emsp;<span class="word-count-wrap"><i class="icon icon-keyboard-o"></i>&nbsp;<span class="word-count"></span></span></p>');var d=a("#redactor_counter-"+this.uuid);this.$editor.on("keyup.redactor-limiter",a.proxy(function(a){b(this)},this));var e=this;this.$element.on("sourceCallback",function(a){e.opts.visual?d.show():d.hide()}),b(this)}}}}(jQuery);