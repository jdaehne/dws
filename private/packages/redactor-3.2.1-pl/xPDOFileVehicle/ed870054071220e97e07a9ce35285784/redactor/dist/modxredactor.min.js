window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.autocomplete=e():t.autocomplete=e()}(this,function(){return i=[function(t,e,n){"use strict";t.exports=n(1)},function(t,e,n){"use strict";var a=n(2),i=(n(3).element=a,n(4)),u=(i.isArray=a.isArray,i.isFunction=a.isFunction,i.isObject=a.isPlainObject,i.bind=a.proxy,i.each=function(t,n){a.each(t,function(t,e){return n(e,t)})},i.map=a.map,i.mixin=a.extend,i.Event=a.Event,"aaAutocomplete"),c=n(5),_=n(6);function s(t,s,r,o){r=i.isArray(r)?r:[].slice.call(arguments,2);var e=a(t).each(function(t,e){var n=a(e),i=new _({el:n}),i=o||new c({input:n,eventBus:i,dropdownMenuContainer:s.dropdownMenuContainer,hint:void 0===s.hint||!!s.hint,minLength:s.minLength,autoselect:s.autoselect,autoselectOnBlur:s.autoselectOnBlur,tabAutocomplete:s.tabAutocomplete,openOnFocus:s.openOnFocus,templates:s.templates,debug:s.debug,clearOnSelected:s.clearOnSelected,cssClasses:s.cssClasses,datasets:r,keyboardShortcuts:s.keyboardShortcuts,appendTo:s.appendTo,autoWidth:s.autoWidth,ariaLabel:s.ariaLabel||e.getAttribute("aria-label")});n.data(u,i)});return e.autocomplete={},i.each(["open","close","getVal","setVal","destroy","getWrapper"],function(s){e.autocomplete[s]=function(){var n,i=arguments;return e.each(function(t,e){e=a(e).data(u);n=e[s].apply(e,i)}),n}}),e}s.sources=c.sources,s.escapeHighlightedString=i.escapeHighlightedString;var r="autocomplete"in window,o=window.autocomplete;s.noConflict=function(){return r?window.autocomplete=o:delete window.autocomplete,s},t.exports=s},function(t,L){function _(t){return t._zid||(t._zid=n++)}function o(t,e,n,i){var s;return(e=h(e)).ns&&(s=j(e.ns)),(x[_(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||s.test(t.ns))&&(!n||_(t.fn)===_(n))&&(!i||t.sel==i)})}function h(t){t=(""+t).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function j(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function p(t,e){return t.del&&!i&&t.e in a||!!e}function l(t){return k[t]||i&&a[t]||t}function c(s,t,e,r,o,a,u){var n=_(s),c=x[n]||(x[n]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return m(document).ready(e);var n=h(t),i=(n.fn=e,n.sel=o,n.e in k&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!m.contains(this,e))return n.fn.apply(this,arguments)}),(n.del=a)||e);n.proxy=function(t){if(!(t=f(t)).isImmediatePropagationStopped()){try{var e=Object.getOwnPropertyDescriptor(t,"data");e&&!e.writable||(t.data=r)}catch(t){}e=i.apply(s,t._args==y?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},n.i=c.length,c.push(n),"addEventListener"in s&&s.addEventListener(l(n.e),n.proxy,p(n,u))})}function d(e,t,n,i,s){var r=_(e);(t||"").split(/\s/).forEach(function(t){o(e,t,n,i).forEach(function(t){delete x[r][t.i],"removeEventListener"in e&&e.removeEventListener(l(t.e),t.proxy,p(t,s))})})}function f(i,s){if(s||!i.isDefaultPrevented){s=s||i,m.each(E,function(t,e){var n=s[t];i[t]=function(){return this[e]=u,n&&n.apply(s,arguments)},i[e]=T});try{i.timeStamp||(i.timeStamp=Date.now())}catch(t){}(s.defaultPrevented!==y?s.defaultPrevented:"returnValue"in s?!1===s.returnValue:s.getPreventDefault&&s.getPreventDefault())&&(i.isDefaultPrevented=u)}return i}function g(t){var e,n={originalEvent:t};for(e in t)C.test(e)||t[e]===y||(n[e]=t[e]);return f(n,t)}function P(t,e){var n=t[I],n=n&&N[n];if(void 0===e)return n||s(t);if(n){if(e in n)return n[e];var i=D(e);if(i in n)return n[i]}return $.call(O(t),e)}function s(t,e,n){var i=t[I]||(t[I]=++O.uuid),i=N[i]||(N[i]=M(t));return void 0!==e&&(i[D(e)]=n),i}function M(t){var n={};return O.each(t.attributes||R,function(t,e){0==e.name.indexOf("data-")&&(n[D(e.name.replace("data-",""))]=O.zepto.deserializeValue(e.value))}),n}var e,G,m,n,y,v,w,b,x,r,i,a,k,u,T,C,E,A,S,O,N,$,D,I,R;e=window,t.exports=(G=e,e=function(){var u,o,c,i,a,n,s=[],j=s.concat,r=s.filter,_=s.slice,h=G.document,p={},e={},P={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,d=/^(?:body|html)$/i,F=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],t=h.createElement("table"),f=h.createElement("tr"),g={tr:h.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:f,th:f,"*":h.createElement("div")},K=/complete|loaded|interactive/,V=/^[\w-]*$/,m={},B=m.toString,y={},v=h.createElement("div"),w={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},b=Array.isArray||function(t){return t instanceof Array};function x(t){return null==t?String(t):m[B.call(t)]||"object"}function k(t){return"function"==x(t)}function T(t){return null!=t&&t==t.window}function C(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function E(t){return"object"==x(t)}function A(t){return E(t)&&!T(t)&&Object.getPrototypeOf(t)==Object.prototype}function S(t){var e=!!t&&"length"in t&&t.length,n=c.type(t);return"function"!=n&&!T(t)&&("array"==n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function O(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function N(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function $(t,e){return"number"!=typeof e||P[O(t)]?e:e+"px"}function q(t){return"children"in t?_.call(t.children):c.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function H(t,e){for(var n=t?t.length:0,i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function D(t,e){return null==e?c(t):c(t).filter(e)}function I(t,e,n,i){return k(e)?e.call(t,n,i):e}function R(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function L(t,e){var n=t.className||"",i=n&&n.baseVal!==u;if(e===u)return i?n.baseVal:n;i?n.baseVal=e:t.className=e}function W(e){try{return e&&("true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?c.parseJSON(e):e))}catch(t){return e}}return y.matches=function(t,e){var n,i;return!(!e||!t||1!==t.nodeType)&&((n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector)?n.call(t,e):((i=!(n=t.parentNode))&&(n=v).appendChild(t),n=~y.qsa(n,e).indexOf(t),i&&v.removeChild(t),n))},a=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},n=function(n){return r.call(n,function(t,e){return n.indexOf(t)==e})},y.fragment=function(t,e,n){var i,s,r;return(i=M.test(t)?c(h.createElement(RegExp.$1)):i)||(t.replace&&(t=t.replace(z,"<$1></$2>")),e===u&&(e=l.test(t)&&RegExp.$1),(r=g[e=e in g?e:"*"]).innerHTML=""+t,i=c.each(_.call(r.childNodes),function(){r.removeChild(this)})),A(n)&&(s=c(i),c.each(n,function(t,e){-1<U.indexOf(t)?s[t](e):s.attr(t,e)})),i},y.Z=function(t,e){return new H(t,e)},y.isZ=function(t){return t instanceof y.Z},y.init=function(t,e){var n,i;if(!t)return y.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&l.test(t))n=y.fragment(t,RegExp.$1,e),t=null;else{if(e!==u)return c(e).find(t);n=y.qsa(h,t)}else{if(k(t))return c(h).ready(t);if(y.isZ(t))return t;if(b(t))i=t,n=r.call(i,function(t){return null!=t});else if(E(t))n=[t],t=null;else if(l.test(t))n=y.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==u)return c(e).find(t);n=y.qsa(h,t)}}return y.Z(n,t)},(c=function(t,e){return y.init(t,e)}).extend=function(e){var n,t=_.call(arguments,1);return"boolean"==typeof e&&(n=e,e=t.shift()),t.forEach(function(t){!function t(e,n,i){for(o in n)i&&(A(n[o])||b(n[o]))?(A(n[o])&&!A(e[o])&&(e[o]={}),b(n[o])&&!b(e[o])&&(e[o]=[]),t(e[o],n[o],i)):n[o]!==u&&(e[o]=n[o])}(e,t,n)}),e},y.qsa=function(t,e){var n,i="#"==e[0],s=!i&&"."==e[0],r=i||s?e.slice(1):e,o=V.test(r);return t.getElementById&&o&&i?(n=t.getElementById(r))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:_.call(o&&!i&&t.getElementsByClassName?s?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},c.contains=h.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},c.type=x,c.isFunction=k,c.isWindow=T,c.isArray=b,c.isPlainObject=A,c.isEmptyObject=function(t){for(var e in t)return!1;return!0},c.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},c.inArray=function(t,e,n){return s.indexOf.call(e,t,n)},c.camelCase=a,c.trim=function(t){return null==t?"":String.prototype.trim.call(t)},c.uuid=0,c.support={},c.expr={},c.noop=function(){},c.map=function(t,e){var n,i,s,r,o=[];if(S(t))for(i=0;i<t.length;i++)null!=(n=e(t[i],i))&&o.push(n);else for(s in t)null!=(n=e(t[s],s))&&o.push(n);return 0<(r=o).length?c.fn.concat.apply([],r):r},c.each=function(t,e){var n,i;if(S(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},c.grep=function(t,e){return r.call(t,e)},G.JSON&&(c.parseJSON=JSON.parse),c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){m["[object "+e+"]"]=e.toLowerCase()}),c.fn={constructor:y.Z,length:0,forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,splice:s.splice,indexOf:s.indexOf,concat:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=y.isZ(t=arguments[n])?t.toArray():t;return j.apply(y.isZ(this)?this.toArray():this,e)},map:function(n){return c(c.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return c(_.apply(this,arguments))},ready:function(t){return K.test(h.readyState)&&h.body?t(c):h.addEventListener("DOMContentLoaded",function(){t(c)},!1),this},get:function(t){return t===u?_.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return s.every.call(this,function(t,e){return!1!==n.call(t,e,t)}),this},filter:function(e){return k(e)?this.not(this.not(e)):c(r.call(this,function(t){return y.matches(t,e)}))},add:function(t,e){return c(n(this.concat(c(t,e))))},is:function(t){return 0<this.length&&y.matches(this[0],t)},not:function(e){var n,i=[];return k(e)&&e.call!==u?this.each(function(t){e.call(this,t)||i.push(this)}):(n="string"==typeof e?this.filter(e):S(e)&&k(e.item)?_.call(e):c(e),this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})),c(i)},has:function(t){return this.filter(function(){return E(t)?c.contains(this,t):c(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!E(t)?t:c(t)},last:function(){var t=this[this.length-1];return t&&!E(t)?t:c(t)},find:function(t){var n=this,e=t?"object"==typeof t?c(t).filter(function(){var e=this;return s.some.call(n,function(t){return c.contains(t,e)})}):1==this.length?c(y.qsa(this[0],t)):this.map(function(){return y.qsa(this,t)}):c();return e},closest:function(n,i){var s=[],r="object"==typeof n&&c(n);return this.each(function(t,e){for(;e&&!(r?0<=r.indexOf(e):y.matches(e,n));)e=e!==i&&!C(e)&&e.parentNode;e&&s.indexOf(e)<0&&s.push(e)}),c(s)},parents:function(t){for(var e=[],n=this;0<n.length;)n=c.map(n,function(t){if((t=t.parentNode)&&!C(t)&&e.indexOf(t)<0)return e.push(t),t});return D(e,t)},parent:function(t){return D(n(this.pluck("parentNode")),t)},children:function(t){return D(this.map(function(){return q(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||_.call(this.childNodes)})},siblings:function(t){return D(this.map(function(t,e){return r.call(q(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return c.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var t,e,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,p[t]||(e=h.createElement(t),h.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),p[t]=n="none"==n?"block":n),p[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n,i,s=k(e);return this[0]&&!s&&(n=c(e).get(0),i=n.parentNode||1<this.length),this.each(function(t){c(this).wrapAll(s?e.call(this,t):i?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){var e;for(c(this[0]).before(t=c(t));(e=t.children()).length;)t=e.first();c(t).append(this)}return this},wrapInner:function(i){var s=k(i);return this.each(function(t){var e=c(this),n=e.contents(),t=s?i.call(this,t):i;n.length?n.wrapAll(t):e.append(t)})},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=c(this);(e===u?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(t){return c(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return c(this.pluck("nextElementSibling")).filter(t||"*")},html:function(n){return 0 in arguments?this.each(function(t){var e=this.innerHTML;c(this).empty().append(I(this,n,t,e))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){t=I(this,e,t,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,n){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(E(e))for(o in e)R(this,o,e[o]);else R(this,e,I(this,n,t,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(e))?t:u},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){R(this,t)},this)})},prop:function(e,n){return e=w[e]||e,1 in arguments?this.each(function(t){this[e]=I(this,n,t,this[e])}):this[0]&&this[0][e]},removeProp:function(t){return t=w[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var n="data-"+t.replace(F,"-$1").toLowerCase(),n=1 in arguments?this.attr(n,e):this.attr(n);return null!==n?W(n):u},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=I(this,e,t,this.value)})):this[0]&&(this[0].multiple?c(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(i){var t;return i?this.each(function(t){var e=c(this),t=I(this,i,t,e.offset()),n=e.offsetParent().offset(),t={top:t.top-n.top,left:t.left-n.left};"static"==e.css("position")&&(t.position="relative"),e.css(t)}):this.length?h.documentElement===this[0]||c.contains(h.documentElement,this[0])?{left:(t=this[0].getBoundingClientRect()).left+G.pageXOffset,top:t.top+G.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}:{top:0,left:0}:null},css:function(t,e){if(arguments.length<2){var n,i,s=this[0];if("string"==typeof t)return s?s.style[a(t)]||getComputedStyle(s,"").getPropertyValue(t):void 0;if(b(t))return s?(n={},i=getComputedStyle(s,""),c.each(t,function(t,e){n[e]=s.style[a(e)]||i.getPropertyValue(e)}),n):void 0}var r="";if("string"==x(t))e||0===e?r=O(t)+":"+$(t,e):this.each(function(){this.style.removeProperty(O(t))});else for(o in t)t[o]||0===t[o]?r+=O(o)+":"+$(o,t[o])+";":this.each(function(){this.style.removeProperty(O(o))});return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(c(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&s.some.call(this,function(t){return this.test(L(t))},N(t))},addClass:function(n){return n?this.each(function(t){var e;"className"in this&&(i=[],e=L(this),I(this,n,t,e).split(/\s+/g).forEach(function(t){c(this).hasClass(t)||i.push(t)},this),i.length)&&L(this,e+(e?" ":"")+i.join(" "))}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===u)return L(this,"");i=L(this),I(this,e,t,i).split(/\s+/g).forEach(function(t){i=i.replace(N(t)," ")}),L(this,i.trim())}})},toggleClass:function(n,i){return n?this.each(function(t){var e=c(this);I(this,n,t,L(this)).split(/\s+/g).forEach(function(t){(i===u?!e.hasClass(t):i)?e.addClass(t):e.removeClass(t)})}):this},scrollTop:function(t){var e;if(this.length)return e="scrollTop"in this[0],t===u?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){var e;if(this.length)return e="scrollLeft"in this[0],t===u?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){var t,e,n,i;if(this.length)return t=this[0],e=this.offsetParent(),n=this.offset(),i=d.test(e[0].nodeName)?{top:0,left:0}:e.offset(),n.top-=parseFloat(c(t).css("margin-top"))||0,n.left-=parseFloat(c(t).css("margin-left"))||0,i.top+=parseFloat(c(e[0]).css("border-top-width"))||0,i.left+=parseFloat(c(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||h.body;t&&!d.test(t.nodeName)&&"static"==c(t).css("position");)t=t.offsetParent;return t})}},c.fn.detach=c.fn.remove,["width","height"].forEach(function(i){var s=i.replace(/./,function(t){return t[0].toUpperCase()});c.fn[i]=function(e){var t,n=this[0];return e===u?T(n)?n["inner"+s]:C(n)?n.documentElement["scroll"+s]:(t=this.offset())&&t[i]:this.each(function(t){(n=c(this)).css(i,I(this,e,t,n[i]()))})}}),["after","prepend","before","append"].forEach(function(e,o){var a=o%2;c.fn[e]=function(){var n,i,s=c.map(arguments,function(t){var e=[];return"array"==(n=x(t))?(t.forEach(function(t){return t.nodeType!==u?e.push(t):c.zepto.isZ(t)?e=e.concat(t.get()):void(e=e.concat(y.fragment(t)))}),e):"object"==n||null==t?t:y.fragment(t)}),r=1<this.length;return s.length<1?this:this.each(function(t,e){i=a?e:e.parentNode,e=0==o?e.nextSibling:1==o?e.firstChild:2==o?e:null;var n=c.contains(h.documentElement,i);s.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!i)return c(t).remove();i.insertBefore(t,e),n&&function t(e,n){n(e);for(var i=0,s=e.childNodes.length;i<s;i++)t(e.childNodes[i],n)}(t,function(t){var e;null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||(e=t.ownerDocument?t.ownerDocument.defaultView:G).eval.call(e,t.innerHTML)})})})},c.fn[a?e+"To":"insert"+(o?"Before":"After")]=function(t){return c(t)[e](this),this}}),y.Z.prototype=H.prototype=c.fn,y.uniq=n,y.deserializeValue=W,c.zepto=y,c}(),m=e,n=1,v=Array.prototype.slice,w=m.isFunction,b=function(t){return"string"==typeof t},x={},r={},i="onfocusin"in G,a={focus:"focusin",blur:"focusout"},k={mouseenter:"mouseover",mouseleave:"mouseout"},r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",m.event={add:c,remove:d},m.proxy=function(t,e){var n,i=2 in arguments&&v.call(arguments,2);if(w(t))return(n=function(){return t.apply(e,i?i.concat(v.call(arguments)):arguments)})._zid=_(t),n;if(b(e))return i?(i.unshift(t[e],t),m.proxy.apply(null,i)):m.proxy(t[e],t);throw new TypeError("expected function")},m.fn.bind=function(t,e,n){return this.on(t,e,n)},m.fn.unbind=function(t,e){return this.off(t,e)},m.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)},u=function(){return!0},T=function(){return!1},C=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},m.fn.delegate=function(t,e,n){return this.on(e,t,n)},m.fn.undelegate=function(t,e,n){return this.off(e,t,n)},m.fn.live=function(t,e){return m(document.body).delegate(this.selector,t,e),this},m.fn.die=function(t,e){return m(document.body).undelegate(this.selector,t,e),this},m.fn.on=function(e,s,n,r,o){var a,u,i=this;return e&&!b(e)?(m.each(e,function(t,e){i.on(t,s,n,e,o)}),i):(b(s)||w(r)||!1===r||(r=n,n=s,s=y),r!==y&&!1!==n||(r=n,n=y),!1===r&&(r=T),i.each(function(t,i){o&&(a=function(t){return d(i,t.type,r),r.apply(this,arguments)}),c(i,e,r,n,s,(u=s?function(t){var e,n=m(t.target).closest(s,i).get(0);if(n&&n!==i)return e=m.extend(g(t),{currentTarget:n,liveFired:i}),(a||r).apply(n,[e].concat(v.call(arguments,1)))}:u)||a)}))},m.fn.off=function(t,n,e){var i=this;return t&&!b(t)?(m.each(t,function(t,e){i.off(t,n,e)}),i):(b(n)||w(e)||!1===e||(e=n,n=y),!1===e&&(e=T),i.each(function(){d(this,t,e,n)}))},m.fn.trigger=function(t,e){return(t=b(t)||m.isPlainObject(t)?m.Event(t):f(t))._args=e,this.each(function(){t.type in a&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):m(this).triggerHandler(t,e)})},m.fn.triggerHandler=function(n,i){var s,r;return this.each(function(t,e){(s=g(b(n)?m.Event(n):n))._args=i,s.target=e,m.each(o(e,n.type||n),function(t,e){if(r=e.proxy(s),s.isImmediatePropagationStopped())return!1})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){m.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),m.Event=function(t,e){b(t)||(t=(e=t).type);var n=document.createEvent(r[t]||"Events"),i=!0;if(e)for(var s in e)"bubbles"==s?i=!!e[s]:n[s]=e[s];return n.initEvent(t,i,!0),f(n)},A=[],e.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(A.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",S&&clearTimeout(S),S=setTimeout(function(){A=[]},6e4)),this.parentNode.removeChild(this))})},N={},$=(O=e).fn.data,D=O.camelCase,I=O.expando="Zepto"+ +new Date,R=[],O.fn.data=function(e,t){return void 0===t?O.isPlainObject(e)?this.each(function(t,n){O.each(e,function(t,e){s(n,t,e)})}):0 in this?P(this[0],e):void 0:this.each(function(){s(this,e,t)})},O.data=function(t,e,n){return O(t).data(e,n)},O.hasData=function(t){t=t[I],t=t&&N[t];return!!t&&!O.isEmptyObject(t)},O.fn.removeData=function(n){return"string"==typeof n&&(n=n.split(/\s+/)),this.each(function(){var t=this[I],e=t&&N[t];e&&O.each(n||e,function(t){delete e[n?D(this):t]})})},["remove","empty"].forEach(function(e){var n=O.fn[e];O.fn[e]=function(){var t=this.find("*");return(t="remove"===e?t.add(this):t).removeData(),n.call(this)}}),e)},function(t,e){"use strict";t.exports={element:null}},function(t,e,n){"use strict";var i,s=n(3);function o(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}t.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(t){if(void 0===t&&(t=navigator.userAgent),/(msie|trident)/i.test(t)){t=t.match(/(msie |rv:)(\d+(.\d+)?)/i);if(t)return t[2]}return!1},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(t){return"number"==typeof t},toStr:function(t){return null==t?"":t+""},cloneDeep:function(t){var n=this.mixin({},t),i=this;return this.each(n,function(t,e){t&&(i.isArray(t)?n[e]=[].concat(t):i.isObject(t)&&(n[e]=i.cloneDeep(t)))}),n},error:function(t){throw new Error(t)},every:function(n,i){var s=!0;return n?(this.each(n,function(t,e){s=s&&i.call(null,t,e,n)&&s}),!!s):s},any:function(n,i){var s=!1;return n&&this.each(n,function(t,e){if(i.call(null,t,e,n))return!(s=!0)}),s},getUniqueId:(i=0,function(){return i++}),templatify:function(t){var e;return this.isFunction(t)?t:"SCRIPT"===(e=s.element(t)).prop("tagName")?function(){return e.text()}:function(){return String(t)}},defer:function(t){setTimeout(t,0)},noop:function(){},formatPrefix:function(t,e){return e?"":t+"-"},className:function(t,e,n){return(n?"":".")+t+e},escapeHighlightedString:function(t,e,n){e=e||"<em>";var i=document.createElement("div"),s=(i.appendChild(document.createTextNode(e)),n=n||"</em>",document.createElement("div")),r=(s.appendChild(document.createTextNode(n)),document.createElement("div"));return r.appendChild(document.createTextNode(t)),r.innerHTML.replace(RegExp(o(i.innerHTML),"g"),e).replace(RegExp(o(s.innerHTML),"g"),n)}}},function(t,e,n){"use strict";var r="aaAttrs",o=n(4),a=n(3),s=n(6),i=n(7),u=n(16),c=n(18),_=n(19);function h(t){if((t=t||{}).input||o.error("missing input"),this.isActivated=!1,this.debug=!!t.debug,this.autoselect=!!t.autoselect,this.autoselectOnBlur=!!t.autoselectOnBlur,this.openOnFocus=!!t.openOnFocus,this.minLength=o.isNumber(t.minLength)?t.minLength:1,this.autoWidth=void 0===t.autoWidth||!!t.autoWidth,this.clearOnSelected=!!t.clearOnSelected,this.tabAutocomplete=void 0===t.tabAutocomplete||!!t.tabAutocomplete,t.hint=!!t.hint,t.hint&&t.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=t.css=o.mixin({},_,t.appendTo?_.appendTo:{}),this.cssClasses=t.cssClasses=o.mixin({},_.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix=o.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=t.listboxId=[this.cssClasses.root,"listbox",o.getUniqueId()].join("-");var e=function(t){var e,n,i;e=a.element(t.input),n=a.element(c.wrapper.replace("%ROOT%",t.cssClasses.root)).css(t.css.wrapper),t.appendTo||"block"!==e.css("display")||"table"!==e.parent().css("display")||n.css("display","table-cell");var s=c.dropdown.replace("%PREFIX%",t.cssClasses.prefix).replace("%DROPDOWN_MENU%",t.cssClasses.dropdownMenu);s=a.element(s).css(t.css.dropdown).attr({role:"listbox",id:t.listboxId}),t.templates&&t.templates.dropdownMenu&&s.html(o.templatify(t.templates.dropdownMenu)());(i=e.clone().css(t.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(e))).val("").addClass(o.className(t.cssClasses.prefix,t.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),i.removeData&&i.removeData();e.data(r,{"aria-autocomplete":e.attr("aria-autocomplete"),"aria-expanded":e.attr("aria-expanded"),"aria-owns":e.attr("aria-owns"),autocomplete:e.attr("autocomplete"),dir:e.attr("dir"),role:e.attr("role"),spellcheck:e.attr("spellcheck"),style:e.attr("style"),type:e.attr("type")}),e.addClass(o.className(t.cssClasses.prefix,t.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":t.datasets&&t.datasets[0]&&t.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":t.ariaLabel,"aria-owns":t.listboxId}).css(t.hint?t.css.input:t.css.inputWithNoHint);try{e.attr("dir")||e.attr("dir","auto")}catch(t){}return(n=t.appendTo?n.appendTo(a.element(t.appendTo).eq(0)).eq(0):e.wrap(n).parent()).prepend(t.hint?i:null).append(s),{wrapper:n,input:e,hint:i,menu:s}}(t),n=(this.$node=e.wrapper,this.$input=e.input),i=e.menu,e=e.hint;t.dropdownMenuContainer&&a.element(t.dropdownMenuContainer).css("position","relative").append(i.css("top","0")),n.on("blur.aa",function(t){var e=document.activeElement;o.isMsie()&&(i[0]===e||i[0].contains(e))&&(t.preventDefault(),t.stopImmediatePropagation(),o.defer(function(){n.focus()}))}),i.on("mousedown.aa",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new s({el:n}),this.dropdown=new h.Dropdown({appendTo:t.appendTo,wrapper:this.$node,menu:i,datasets:t.datasets,templates:t.templates,cssClasses:t.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new h.Input({input:n,hint:e}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(t),this._setLanguageDirection()}o.mixin(h.prototype,{_bindKeyboardShortcuts:function(t){var i,s;t.keyboardShortcuts&&(i=this.$input,s=[],o.each(t.keyboardShortcuts,function(t){"string"==typeof t&&(t=t.toUpperCase().charCodeAt(0)),s.push(t)}),a.element(document).keydown(function(t){var e=t.target||t.srcElement,n=e.tagName;e.isContentEditable||"INPUT"===n||"SELECT"===n||"TEXTAREA"===n||(e=t.which||t.keyCode,-1!==s.indexOf(e)&&(i.focus(),t.stopPropagation(),t.preventDefault()))}))},_onSuggestionClicked:function(t,e){(e=this.dropdown.getDatumForSuggestion(e))&&this._select(e,{selectionMethod:"click"})},_onCursorMoved:function(t,e){var n=this.dropdown.getDatumForCursor(),i=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(i),n&&(e&&this.input.setInputValue(n.value,!0),this.eventBus.trigger("cursorchanged",n.raw,n.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var t=this.$input[0].getBoundingClientRect(),e=(this.autoWidth&&this.$node.css("width",t.width+"px"),this.$node[0].getBoundingClientRect()),n=t.bottom-e.top,n=(this.$node.css("top",n+"px"),t.left-e.left);this.$node.css("left",n+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){var t;this.isActivated=!0,this.openOnFocus&&((t=this.input.getQuery()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open())},_onBlurred:function(){var t=this.dropdown.getDatumForCursor(),e=this.dropdown.getDatumForTopSuggestion(),n={selectionMethod:"blur"};this.debug||(this.autoselectOnBlur&&t?this._select(t,n):this.autoselectOnBlur&&e?this._select(e,n):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(t,e){var n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),s={selectionMethod:"enterKey"};n?(this._select(n,s),e.preventDefault()):this.autoselect&&i&&(this._select(i,s),e.preventDefault())},_onTabKeyed:function(t,e){var n;this.tabAutocomplete?(n=this.dropdown.getDatumForCursor())?(this._select(n,{selectionMethod:"tabKey"}),e.preventDefault()):this._autocomplete(!0):this.dropdown.close()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t=this.input.getLanguageDirection();this.dir!==t&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,n=this.dropdown.getDatumForTopSuggestion();n&&this.dropdown.isVisible()&&!this.input.hasOverflow()&&(t=this.input.getInputValue(),e=i.normalizeQuery(t),e=o.escapeRegExChars(e),e=new RegExp("^(?:"+e+")(.+$)","i").exec(n.value))?this.input.setHint(t+e[1]):this.input.clearHint()},_autocomplete:function(t){var e=this.input.getHint(),n=this.input.getQuery(),t=t||this.input.isCursorAtEnd();e&&n!==e&&t&&((n=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(n.value),this.eventBus.trigger("autocompleted",n.raw,n.datasetName))},_select:function(t,e){void 0!==t.value&&this.input.setQuery(t.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(t.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",t.raw,t.datasetName,e).isDefaultPrevented()&&(this.dropdown.close(),o.defer(o.bind(this.dropdown.empty,this.dropdown)))},open:function(){var t;this.isActivated||((t=this.input.getInputValue()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty()),this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=o.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy();var t=this.$node,e=this.cssClasses,n=t.find(o.className(e.prefix,e.input));o.each(n.data(r),function(t,e){void 0===t?n.removeAttr(e):n.attr(e,t)}),n.detach().removeClass(o.className(e.prefix,e.input,!0)).insertAfter(t),n.removeData&&n.removeData(r),t.remove(),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),h.Dropdown=u,h.Input=i,h.sources=n(20),t.exports=h},function(t,e,n){"use strict";var s=n(4),i=n(3);function r(t){t&&t.el||s.error("EventBus initialized without el"),this.$el=i.element(t.el)}s.mixin(r.prototype,{trigger:function(t,e,n,i){t=s.Event("autocomplete:"+t);return this.$el.trigger(t,[e,n,i]),t}}),t.exports=r},function(t,e,n){"use strict";var o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},a=n(4),u=n(3),n=n(8);function i(t){var e,n,i,s,r=this;(t=t||{}).input||a.error("input is missing"),e=a.bind(this._onBlur,this),n=a.bind(this._onFocus,this),i=a.bind(this._onKeydown,this),s=a.bind(this._onInput,this),this.$hint=u.element(t.hint),this.$input=u.element(t.input).on("blur.aa",e).on("focus.aa",n).on("keydown.aa",i),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=a.noop),a.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(t){o[t.which||t.keyCode]||a.defer(a.bind(r._onInput,r,t))}):this.$input.on("input.aa",s),this.query=this.$input.val(),this.$overflowHelper=(t=this.$input,u.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t))}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}i.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},a.mixin(i.prototype,n,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=o[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,s;switch(t){case"tab":i=this.getHint(),s=this.getInputValue(),n=i&&i!==s&&!r(e);break;case"up":case"down":n=!r(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){t="tab"!==t||!r(e);return t},_checkInputValue:function(){var t,e,n=this.getInputValue();t=n,e=this.query,e=!(!(t=i.normalizeQuery(t)===i.normalizeQuery(e))||!this.query)&&this.query.length!==n.length,this.query=n,t?e&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){void 0===t&&(t=this.query),this.$input.val(t),e?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(t){this.$input.attr("aria-activedescendant",t)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t=this.getInputValue(),e=this.getHint(),e=t!==e&&0===e.indexOf(t);""!==t&&e&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t=this.$input.val().length,e=this.$input[0].selectionStart;return a.isNumber(e)?e===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),t.exports=i},function(t,e,n){"use strict";var r=n(9),a=/\s+/;function i(t,e,n,i){var s,r,o;if(n)for(e=e.split(a),n=i?(o=i,(r=n).bind?r.bind(o):function(){r.apply(o,[].slice.call(arguments,0))}):n,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(n);return this}function o(i,s,r){return function(){for(var t,e=0,n=i.length;!t&&e<n;e+=1)t=!1===i[e].apply(s,r);return!t}}t.exports={onSync:function(t,e,n){return i.call(this,"sync",t,e,n)},onAsync:function(t,e,n){return i.call(this,"async",t,e,n)},off:function(t){var e;if(this._callbacks)for(t=t.split(a);e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,n,i,s;if(this._callbacks)for(t=t.split(a),n=[].slice.call(arguments,1);(s=t.shift())&&(e=this._callbacks[s]);)i=o(e.sync,this,[s].concat(n)),s=o(e.async,this,[s].concat(n)),i()&&r(s);return this}}},function(t,e,n){"use strict";var i,s,r,o=[n(10),n(12),n(13),n(14),n(15)],a=-1,u=[],c=!1;function _(){i&&s&&(i=!1,s.length?u=s.concat(u):a=-1,u.length)&&h()}function h(){if(!i){i=!(c=!1);for(var t=u.length,e=setTimeout(_);t;){for(s=u,u=[];s&&++a<t;)s[a].run();a=-1,t=u.length}s=null,i=!(a=-1),clearTimeout(e)}}for(var p=-1,l=o.length;++p<l;)if(o[p]&&o[p].test&&o[p].test()){r=o[p].install(h);break}function d(t,e){this.fun=t,this.array=e}d.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},t.exports=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),c||i||(c=!0,r())}},function(t,n,e){!function(e){"use strict";n.test=function(){return void 0!==e&&!e.browser},n.install=function(t){return function(){e.nextTick(t)}}}.call(n,e(11))},function(t,e){var n,i,t=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var a,u=[],c=!1,_=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):_=-1,u.length)&&p()}function p(){if(!c){for(var t=o(h),e=(c=!0,u.length);e;){for(a=u,u=[];++_<e;)a&&a[_].run();_=-1,e=u.length}a=null,c=!1,!function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function d(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new l(t,e)),1!==u.length||c||o(p)},l.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e){!function(i){"use strict";var s=i.MutationObserver||i.WebKitMutationObserver;e.test=function(){return s},e.install=function(t){var e=0,t=new s(t),n=i.document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}}.call(e,function(){return this}())},function(t,e){!function(n){"use strict";e.test=function(){return!n.setImmediate&&void 0!==n.MessageChannel},e.install=function(t){var e=new n.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}}.call(e,function(){return this}())},function(t,e){!function(n){"use strict";e.test=function(){return"document"in n&&"onreadystatechange"in n.document.createElement("script")},e.install=function(e){return function(){var t=n.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},n.document.documentElement.appendChild(t),e}}}.call(e,function(){return this}())},function(t,e){"use strict";e.test=function(){return!0},e.install=function(t){return function(){setTimeout(t,0)}}},function(t,e,n){"use strict";var a=n(4),u=n(3),i=n(8),s=n(17),c=n(19);function _(i){var t,e,n,s=this,r=((i=i||{}).menu||a.error("menu is required"),a.isArray(i.datasets)||a.isObject(i.datasets)||a.error("1 or more datasets required"),i.datasets||a.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=i.minLength||0,this.templates={},this.appendTo=i.appendTo||!1,this.css=a.mixin({},c,i.appendTo?c.appendTo:{}),this.cssClasses=i.cssClasses=a.mixin({},c.defaultClasses,i.cssClasses||{}),this.cssClasses.prefix=i.cssClasses.formattedPrefix||a.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),t=a.bind(this._onSuggestionClick,this),e=a.bind(this._onSuggestionMouseEnter,this),n=a.bind(this._onSuggestionMouseLeave,this),a.className(this.cssClasses.prefix,this.cssClasses.suggestion)),o=(this.$menu=u.element(i.menu).on("mouseenter.aa",r,e).on("mouseleave.aa",r,n).on("click.aa",r,t),this.$container=i.appendTo?i.wrapper:this.$menu,i.templates&&i.templates.header&&(this.templates.header=a.templatify(i.templates.header),this.$menu.prepend(this.templates.header())),i.templates&&i.templates.empty&&(this.templates.empty=a.templatify(i.templates.empty),this.$empty=u.element('<div class="'+a.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=a.map(i.datasets,function(t){return e=s.$menu,n=i.cssClasses,new _.Dataset(a.mixin({$menu:e,cssClasses:n},t));var e,n}),a.each(this.datasets,function(t){var e=t.getRoot();e&&0===e.parent().length&&s.$menu.append(e),t.onSync("rendered",s._onRendered,s)}),i.templates&&i.templates.footer&&(this.templates.footer=a.templatify(i.templates.footer),this.$menu.append(this.templates.footer())),this);u.element(window).resize(function(){o._redraw()})}a.mixin(_.prototype,i,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",u.element(t.currentTarget))},_onSuggestionMouseEnter:function(t){var e,n=u.element(t.currentTarget);n.hasClass(a.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))||(this._removeCursor(),e=this,setTimeout(function(){e._setCursor(n,!1)},0))},_onSuggestionMouseLeave:function(t){if(t.relatedTarget&&0<u.element(t.relatedTarget).closest("."+a.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length)return;this._removeCursor(),this.trigger("cursorRemoved")},_onRendered:function(t,e){var n;this.isEmpty=a.every(this.datasets,function(t){return t.isEmpty()}),this.isEmpty?(e.length>=this.minLength&&this.trigger("empty"),this.$empty?e.length<this.minLength?this._hide():(n=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query}),this.$empty.html(n),this.$empty.show(),this._show()):!a.any(this.datasets,function(t){return t.templates&&t.templates.empty})||e.length<this.minLength?this._hide():this._show()):this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),e.length>=this.minLength?this._show():this._hide()),this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(a.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(a.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(t,e){t.first().addClass(a.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",e)},_removeCursor:function(){this._getCursor().removeClass(a.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(t){var e,n;this.isOpen&&(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1===(n=((n=e.index(n)+t)+1)%(e.length+1)-1)?this.trigger("cursorRemoved"):(n<-1&&(n=e.length-1),this._setCursor(t=e.eq(n),!0),this._ensureVisible(t)))},_ensureVisible:function(t){var e=t.position().top,t=e+t.height()+parseInt(t.css("margin-top"),10)+parseInt(t.css("margin-bottom"),10),n=this.$menu.scrollTop(),i=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10);e<0?this.$menu.scrollTop(n+e):i<t&&this.$menu.scrollTop(n+(t-i))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return e=t.length?{raw:s.extractDatum(t),value:s.extractValue(t),datasetName:s.extractDatasetName(t)}:e},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(e){a.each(this.datasets,function(t){t.update(e)})},empty:function(){a.each(this.datasets,function(t){t.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,a.each(this.datasets,function(t){t.destroy()})}}),_.Dataset=s,t.exports=_},function(t,e,n){"use strict";var a="aaDataset",u="aaValue",c="aaDatum",_=n(4),h=n(3),p=n(18),s=n(19),n=n(8);function i(t){(t=t||{}).templates=t.templates||{},t.source||_.error("missing source"),t.name&&!/^[_a-zA-Z0-9-]+$/.test(t.name)&&_.error("invalid dataset name: "+t.name),this.query=null,this._isEmpty=!0,this.highlight=!!t.highlight,this.name=void 0===t.name||null===t.name?_.getUniqueId():t.name,this.source=t.source,this.displayFn=(e=(e=t.display||t.displayKey)||"value",_.isFunction(e)?e:function(t){return t[e]}),this.debounce=t.debounce,this.cache=!1!==t.cache,this.templates=(i=t.templates,n=this.displayFn,{empty:i.empty&&_.templatify(i.empty),header:i.header&&_.templatify(i.header),footer:i.footer&&_.templatify(i.footer),suggestion:i.suggestion||function(t){return"<p>"+n(t)+"</p>"}}),this.css=_.mixin({},s,t.appendTo?s.appendTo:{}),this.cssClasses=t.cssClasses=_.mixin({},s.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||_.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var e,n,i=_.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=t.$menu&&0<t.$menu.find(i+"-"+this.name).length?h.element(t.$menu.find(i+"-"+this.name)[0]):h.element(p.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=t.$menu,this.clearCachedSuggestions()}i.extractDatasetName=function(t){return h.element(t).data(a)},i.extractValue=function(t){return h.element(t).data(u)},i.extractDatum=function(t){t=h.element(t).data(c);return t="string"==typeof t?JSON.parse(t):t},_.mixin(i.prototype,n,{_render:function(e,s){if(this.$el){var n,r=this,t=[].slice.call(arguments,2);if(this.$el.empty(),n=s&&s.length,this._isEmpty=!n,!n&&this.templates.empty)this.$el.html(function(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!0}].concat(t),r.templates.empty.apply(this,t)}.apply(this,t)).prepend(r.templates.header?i.apply(this,t):null).append(r.templates.footer?o.apply(this,t):null);else if(n)this.$el.html(function(){var t,n=[].slice.call(arguments,0),i=this,e=p.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return e=h.element(e).css(this.css.suggestions),t=_.map(s,function(t){var e=p.suggestion.replace("%PREFIX%",i.cssClasses.prefix).replace("%SUGGESTION%",i.cssClasses.suggestion);return(e=h.element(e).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(r.templates.suggestion.apply(this,[t].concat(n)))).data(a,r.name),e.data(u,r.displayFn(t)||void 0),e.data(c,JSON.stringify(t)),e.children().each(function(){h.element(this).css(i.css.suggestionChild)}),e}),e.append.apply(e,t),e}.apply(this,t)).prepend(r.templates.header?i.apply(this,t):null).append(r.templates.footer?o.apply(this,t):null);else if(s&&!Array.isArray(s))throw new TypeError("suggestions must be an array");this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(n?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(n?"without":"with")+"-"+this.name),this.trigger("rendered",e)}function i(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!n}].concat(t);return r.templates.header.apply(this,t)}function o(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!n}].concat(t);return r.templates.footer.apply(this,t)}},getRoot:function(){return this.$el},update:function(n){function t(t){var e;this.canceled||n!==this.query||(e=[].slice.call(arguments,1),this.cacheSuggestions(n,t,e),this._render.apply(this,[n,t].concat(e)))}var e,i;this.query=n,this.canceled=!1,this.shouldFetchFromCache(n)?t.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs)):(i=function(){e.canceled||e.source(n,t.bind(e))},(e=this).debounce?(clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(function(){e.debounceTimeout=null,i()},this.debounce)):i())},cacheSuggestions:function(t,e,n){this.cachedQuery=t,this.cachedSuggestions=e,this.cachedRenderExtraArgs=n},shouldFetchFromCache:function(t){return this.cache&&this.cachedQuery===t&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.$el&&(this.cancel(),this.$el.empty(),this.trigger("rendered",""))},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),t.exports=i},function(t,e){"use strict";t.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},function(t,e,n){"use strict";var n=n(4),i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};n.isMsie()&&n.mixin(i.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(i.input,{marginTop:"-1px"}),t.exports=i},function(t,e,n){"use strict";t.exports={hits:n(21),popularIn:n(24)}},function(t,e,n){"use strict";var s=n(4),r=n(22),o=n(23);t.exports=function(e,i){var t=o(e.as._ua);return t&&3<=t[0]&&20<t[1]&&((i=i||{}).additionalUA="autocomplete.js "+r),function(t,n){e.search(t,i,function(t,e){t?s.error(t.message):n(e.hits,e)})}}},function(t,e){t.exports="0.37.1"},function(t,e){"use strict";t.exports=function(t){t=t.match(/Algolia for JavaScript \((\d+\.)(\d+\.)(\d+)\)/)||t.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(t)return[t[1],t[2],t[3]]}},function(t,e,n){"use strict";var _=n(4),h=n(22),p=n(23);t.exports=function(e,n,i,a){var u,c,t=p(e.as._ua);return t&&3<=t[0]&&20<t[1]&&((n=n||{}).additionalUA="autocomplete.js "+h),i.source?(u=_.isFunction(i.source)?i.source:function(t){return t[i.source]},i.index?(c=i.index,a=a||{},function(t,o){e.search(t,n,function(t,s){var r,e;t?_.error(t.message):0<s.hits.length?(r=s.hits[0],delete(t=_.mixin({hitsPerPage:0},i)).source,delete t.index,(e=p(c.as._ua))&&3<=e[0]&&20<e[1]&&(n.additionalUA="autocomplete.js "+h),c.search(u(r),t,function(t,e){if(t)_.error(t.message);else{var i=[];a.includeAll&&(t=a.allTitle||"All departments",i.push(_.mixin({facet:{value:t,count:e.nbHits}},_.cloneDeep(r)))),_.each(e.facets,function(t,n){_.each(t,function(t,e){i.push(_.mixin({facet:{facet:n,value:e,count:t}},_.cloneDeep(r)))})});for(var n=1;n<s.hits.length;++n)i.push(s.hits[n]);o(i,s)}})):o([])})}):_.error("Missing 'index' key")):_.error("Missing 'source' key")}}],s={},n.m=i,n.c=s,n.p="",n(0);function n(t){var e;return(s[t]||(e=s[t]={exports:{},id:t,loaded:!1},i[t].call(e.exports,e,e.exports,n),e.loaded=!0,e)).exports}var i,s}),function(){!function(){"use strict";var i=[,,function(t){function s(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",0<t.indent_level&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function e(t,e){this.__indent_cache=new n(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new s(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}s.prototype.clone_empty=function(){var t=new s(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},s.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},s.prototype.has_match=function(t){for(var e=this.__items.length-1;0<=e;e--)if(this.__items[e].match(t))return!0;return!1},s.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},s.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},s.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},s.prototype._allow_wrap=function(){var t;return!!this._should_wrap()&&(this.__parent.add_new_line(),(t=this.__parent.current_line).set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),--t.__character_count),!0)},s.prototype.is_empty=function(){return 0===this.__items.length},s.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},s.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf("\n");-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},s.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},s.prototype._remove_indent=function(){0<this.__indent_count&&(--this.__indent_count,this.__character_count-=this.__parent.indent_size)},s.prototype._remove_wrap_indent=function(){0<this.__wrap_point_indent_count&&--this.__wrap_point_indent_count},s.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),--this.__character_count},s.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return n=(n=t<0?0:n)+t*this.__indent_size+(e=e||0)},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=""),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t,e=this.__cache.length,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},e.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},e.prototype.get_line_number=function(){return this.__lines.length},e.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},e.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},e.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},e.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},e.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop(),e=(e&&("\n"===e[e.length-1]&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline(),this.__lines.join("\n"));return e="\n"!==t?e.replace(/[\n]/g,t):e},e.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},e.prototype.set_indent=function(t,e){return this.next_line.set_indent(t=t||0,e=e||0),1<this.__lines.length?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},e.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},e.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},e.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},e.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},e.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&1<this.__lines.length&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=1<this.__lines.length?this.__lines[this.__lines.length-2]:null},e.prototype.just_added_newline=function(){return this.current_line.is_empty()},e.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},e.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;0<=n;){var i=this.__lines[n];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==e){this.__lines.splice(n+1,0,new s(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=e},function(t){t.exports.Token=function(t,e,n,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size)&&(this.indent_size=4),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function n(t,e){var n,i={};for(n in t=s(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function s(t){var e,n={};for(e in t)n[e.replace(/-/g,"_")]=t[e];return n}e.prototype._get_array=function(t,e){t=this.raw_options[t],e=e||[];return"object"==typeof t?null!==t&&"function"==typeof t.concat&&(e=t.concat()):"string"==typeof t&&(e=t.split(/[^a-zA-Z0-9_\/\-]+/)),e},e.prototype._get_boolean=function(t,e){t=this.raw_options[t];return void 0===t?!!e:!!t},e.prototype._get_characters=function(t,e){t=this.raw_options[t],e=e||"";return e="string"==typeof t?t.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t"):e},e.prototype._get_number=function(t,e){t=this.raw_options[t],e=parseInt(e,10),isNaN(e)&&(e=0),t=parseInt(t,10);return t=isNaN(t)?e:t},e.prototype._get_selection=function(t,e,n){n=this._get_selection_list(t,e,n);if(1!==n.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return n[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");n=this._get_array(t,n);if(this._is_valid_selection(n,e))return n;throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'")},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(t){return-1===e.indexOf(t)})},t.exports.Options=e,t.exports.normalizeOpts=s,t.exports.mergeOpts=n},,function(t){var i=RegExp.prototype.hasOwnProperty("sticky");function e(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}e.prototype.restart=function(){this.__position=0},e.prototype.back=function(){0<this.__position&&--this.__position},e.prototype.hasNext=function(){return this.__position<this.__input_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,e=0<=(t+=this.__position)&&t<this.__input_length?this.__input.charAt(t):e},e.prototype.__match=function(t,e){t.lastIndex=e;var n=t.exec(this.__input);return!n||i&&t.sticky||n.index!==e&&(n=null),n},e.prototype.test=function(t,e){return e=e||0,0<=(e+=this.__position)&&e<this.__input_length&&!!this.__match(t,e)},e.prototype.testChar=function(t,e){e=this.peek(e);return t.lastIndex=0,null!==e&&t.test(e)},e.prototype.match=function(t){t=this.__match(t,this.__position);return t?this.__position+=t[0].length:t=null,t},e.prototype.read=function(t,e,n){var i,s="";return t&&(i=this.match(t))&&(s+=i[0]),!e||!i&&t||(s+=this.readUntil(e,n)),s},e.prototype.readUntil=function(t,e){var n=this.__position,t=(t.lastIndex=this.__position,t.exec(this.__input));return t?(n=t.index,e&&(n+=t[0].length)):n=this.__input_length,e=this.__input.substring(this.__position,n),this.__position=n,e},e.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},e.prototype.get_regexp=function(t,e){var n=null,e=e&&i?"y":"g";return"string"==typeof t&&""!==t?n=new RegExp(t,e):t&&(n=new RegExp(t.source,e)),n},e.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},e.prototype.peekUntilAfter=function(t){var e=this.__position,t=this.readUntilAfter(t);return this.__position=e,t},e.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=e},function(t,e,n){function i(t,e){this._input=new s(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new a(this._input)}var s=n(8).InputScanner,r=n(3).Token,o=n(10).TokenStream,a=n(11).WhitespacePattern,u={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"};i.prototype.tokenize=function(){this._input.restart(),this.__tokens=new o,this._reset();for(var t,e=new r(u.START,""),n=null,i=[],s=new o;e.type!==u.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new o),t.parent=n,this._is_opening(t)?(i.push(n),n=t):n&&this._is_closing(t,n)&&((t.opened=n).closed=t,n=i.pop(),t.parent=n),(t.previous=e).next=t,this.__tokens.add(t),e=t}return this.__tokens},i.prototype._is_first_token=function(){return this.__tokens.isEmpty()},i.prototype._reset=function(){},i.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(u.RAW,n):this._create_token(u.EOF,"")},i.prototype._is_comment=function(t){return!1},i.prototype._is_opening=function(t){return!1},i.prototype._is_closing=function(t,e){return!1},i.prototype._create_token=function(t,e){return new r(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},i.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=i,t.exports.TOKEN=u},function(t){function e(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return 0===this.__tokens_length},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,e=0<=(t+=this.__position)&&t<this.__tokens_length?this.__tokens[t]:e},e.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=e},function(t,e,n){var i=n(12).Pattern;function s(t,e){i.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}(s.prototype=new i).__set_whitespace_patterns=function(t,e){this._match_pattern=this._input.get_regexp("["+(t+="\\t ")+(e+="\\n\\r")+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")},s.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t,e=this._input.read(this._match_pattern);return" "===e?this.whitespace_before_token=" ":e&&(t=this.__split(this._newline_regexp,e),this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]),e},s.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},s.prototype._create=function(){return new s(this._input,this)},s.prototype.__split=function(t,e){for(var n=t.lastIndex=0,i=[],s=t.exec(e);s;)i.push(e.substring(n,s.index)),n=s.index+s[0].length,s=t.exec(e);return n<e.length?i.push(e.substring(n,e.length)):i.push(""),i},t.exports.WhitespacePattern=s},function(t){function e(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}e.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},t.exports.Pattern=e},function(t){function e(t,e){t="string"==typeof t?t:t.source,e="string"==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;for(var e={},n=(this.__directive_pattern.lastIndex=0,this.__directive_pattern.exec(t));n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},function(t,e,n){var i=n(12).Pattern,s={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function r(t,e){i.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},s),this._excluded=Object.assign({},s),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));e=new i(t);this.__patterns={handlebars_comment:e.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:e.starting_with(/{{{/).until_after(/}}}/),handlebars:e.starting_with(/{{/).until_after(/}}/),php:e.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:e.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:e.starting_with(/{%/).until_after(/%}/),django_value:e.starting_with(/{{/).until_after(/}}/),django_comment:e.starting_with(/{#/).until_after(/#}/),smarty:e.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:e.starting_with(/{\*/).until_after(/\*}/),smarty_literal:e.starting_with(/{literal}/).until_after(/{\/literal}/)}}(r.prototype=new i)._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},r.prototype.read_options=function(t){var e,n=this._create();for(e in s)n._disabled[e]=-1===t.templating.indexOf(e);return n._update(),n},r.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},r.prototype.read=function(){for(var t="",t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern),e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},r.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")},r.prototype._read_template=function(){var t,e="",n=this._input.peek();return"<"===n?(t=this._input.peek(1),this._disabled.php||this._excluded.php||"?"!==t||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==t||(e=e||this.__patterns.erb.read())):"{"===n&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django)||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read()),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(e=(e=(e=e||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read())),e},t.exports.TemplatablePattern=r},,,,function(t,e,n){var s=n(19).Beautifier,i=n(20).Options;t.exports=function(t,e,n,i){return new s(t,e,n,i).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){function c(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new i(t,e)}function r(t,e){var n=null,i=null;return e.closed?("script"===t?n="text/javascript":"style"===t&&(n="text/css"),-1<(n=function(t){for(var e=null,n=t.next;n.type!==h.EOF&&t.closed!==n;){if(n.type===h.ATTRIBUTE&&"type"===n.text){n.next&&n.next.type===h.EQUALS&&n.next.next&&n.next.next.type===h.VALUE&&(e=n.next.next.text);break}n=n.next}return e}(e)||n).search("text/css")?i="css":-1<n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)?i="javascript":-1<n.search(/(text|application|dojo)\/(x-)?(html)/)?i="html":-1<n.search(/test\/null/)&&(i="null"),i):null}var s=n(20).Options,i=n(2).Output,_=n(21).Tokenizer,h=n(21).TOKEN,p=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g;c.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},c.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e},c.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},c.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},c.prototype.print_preserved_newlines=function(t){var e=0;t.type!==h.TEXT&&t.previous.type!==h.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(0<n);return 0!==e},c.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines||(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),0))},c.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},c.prototype.print_newline=function(t){this._output.add_new_line(t)},c.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))},c.prototype.indent=function(){this.indent_level++},c.prototype.get_full_indent=function(t){return(t=this.indent_level+(t||0))<1?"":this._output.get_indent_string(t)};function o(t,e){return-1!==e.indexOf(t)}function a(t,e,n){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=n||0,this.parser_token=e||null}function d(t){this._printer=t,this._current_frame=null}function f(t,e,n,i){this._source_text=t||"",e=e||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;t=new s(e,"html");this._options=t,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}d.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},d.prototype.record_tag=function(t){t=new a(this._current_frame,t,this._printer.indent_level);this._current_frame=t},d.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},d.prototype._get_frame=function(t,e){for(var n=this._current_frame;n&&-1===t.indexOf(n.tag);){if(e&&-1!==e.indexOf(n.tag)){n=null;break}n=n.parent}return n},d.prototype.try_pop=function(t,e){t=this._get_frame([t],e);return this._try_pop_frame(t)},d.prototype.indent_to_tag=function(t){t=this._get_frame(t);t&&(this._printer.indent_level=t.indent_level)},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;for(var t=this._source_text,e=this._options.eol,n=("auto"===this._options.eol&&(e="\n",t)&&p.test(t)&&(e=t.match(p)[0]),(t=t.replace(l,"\n")).match(/^[\t ]*/)[0]),i={text:"",type:""},s=new g,r=new c(this._options,n),o=new _(t,this._options).tokenize(),a=(this._tag_stack=new d(r),null),u=o.next();u.type!==h.EOF;)u.type===h.TAG_OPEN||u.type===h.COMMENT?s=a=this._handle_tag_open(r,u,s,i,o):u.type===h.ATTRIBUTE||u.type===h.EQUALS||u.type===h.VALUE||u.type===h.TEXT&&!s.tag_complete?a=this._handle_inside_tag(r,u,s,i):u.type===h.TAG_CLOSE?a=this._handle_tag_close(r,u,s):u.type===h.TEXT?a=this._handle_text(r,u,s):r.add_raw_token(u),i=a,u=o.next();return r._output.get_code(e)},f.prototype._handle_tag_close=function(t,e,n){var i={text:e.text,type:e.type};return t.alignment_size=0,n.tag_complete=!0,t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):("<"===n.tag_start_char&&(t.set_space_before_token("/"===e.text[0],!0),this._is_wrap_attributes_force_expand_multiline)&&n.has_wrapped_attrs&&t.print_newline(!1),t.print_token(e)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(t.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||t.set_wrap_point(),i},f.prototype._handle_inside_tag=function(t,e,n,i){var s=n.has_wrapped_attrs,r={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):"{"===n.tag_start_char&&e.type===h.TEXT?t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e):(e.type===h.ATTRIBUTE?t.set_space_before_token(!0):(e.type===h.EQUALS||e.type===h.VALUE&&e.previous.type===h.EQUALS)&&t.set_space_before_token(!1),e.type===h.ATTRIBUTE&&"<"===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),s=s||0!==e.newlines),this._is_wrap_attributes_force)&&n.attr_count>=this._options.wrap_attributes_min_attrs&&(i.type!==h.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(t.print_newline(!1),s=!0),t.print_token(e),s=s||t.previous_token_wrapped(),n.has_wrapped_attrs=s),r},f.prototype._handle_text=function(t,e,n){var i={text:e.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(t,e,n):n.is_unformatted||n.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),i},f.prototype._print_custom_beatifier_text=function(t,e,n){var i=this;if(""!==e.text){var s,r=e.text,o=1,a="",u="",o=("javascript"===n.custom_beautifier_name&&"function"==typeof this._js_beautify?s=this._js_beautify:"css"===n.custom_beautifier_name&&"function"==typeof this._css_beautify?s=this._css_beautify:"html"===n.custom_beautifier_name&&(s=function(t,e){return new f(t,e,i._js_beautify,i._css_beautify).beautify()}),"keep"===this._options.indent_scripts?o=0:"separate"===this._options.indent_scripts&&(o=-t.indent_level),t.get_full_indent(o));if(r=r.replace(/\n[ \t]*$/,""),"html"!==n.custom_beautifier_name&&"<"===r[0]&&r.match(/^(<!--|<!\[CDATA\[)/)){var n=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(r);if(!n)return void t.add_raw_token(e);a=o+n[1]+"\n",r=n[4],n[5]&&(u=o+n[5]),r=r.replace(/\n[ \t]*$/,""),(n[2]||-1!==n[3].indexOf("\n"))&&(n=n[3].match(/[ \t]+$/))&&(e.whitespace_before=n[0])}r=r&&(s?((n=function(){this.eol="\n"}).prototype=this._options.raw_options,s(o+r,new n)):o+(r=(s=e.whitespace_before)?r.replace(new RegExp("\n("+s+")?","g"),"\n"):r).replace(/\n/g,"\n"+o)),a&&(r=r?a+r+"\n"+u:a+u),t.print_newline(!1),r&&(e.text=r,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}},f.prototype._handle_tag_open=function(t,e,n,i,s){var r=this._get_tag_open_token(e);if(!n.is_unformatted&&!n.is_content_unformatted||n.is_empty_element||e.type!==h.TAG_OPEN||r.is_start_tag?(t.traverse_whitespace(e),this._set_tag_position(t,e,r,n,i),r.is_inline_element||t.set_wrap_point(),t.print_token(e)):(t.add_raw_token(e),r.start_tag_token=this._tag_stack.try_pop(r.tag_name)),r.is_start_tag&&this._is_wrap_attributes_force)for(var o,a=0;(o=s.peek(a)).type===h.ATTRIBUTE&&(r.attr_count+=1),a+=1,o.type!==h.EOF&&o.type!==h.TAG_CLOSE;);return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(r.alignment_size=e.text.length+1),r.tag_complete||r.is_unformatted||(t.alignment_size=r.alignment_size),r};var g=function(t,e){var n;this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",e?(this.tag_start_char=e.text[0],this.text=e.text,"<"===this.tag_start_char?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=e.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:"",(e.text.startsWith("{{#>")||e.text.startsWith("{{~#>"))&&">"===this.tag_check[0]&&(">"===this.tag_check&&null!==e.next?this.tag_check=e.next.text.split(" ")[0]:this.tag_check=e.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),e.type===h.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&"/>"===e.closed.text,t=2,"{"===this.tag_start_char&&3<=this.text.length&&"~"===this.text.charAt(2)&&(t=3),this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(t)))):this.tag_complete=!0},u=(f.prototype._get_tag_open_token=function(t){t=new g(this._tag_stack.get_parser_token(),t);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||o(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&o(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&o(t.tag_check,this._options.content_unformatted),t.is_inline_element=o(t.tag_name,this._options.inline)||this._options.inline_custom_elements&&t.tag_name.includes("-")||"{"===t.tag_start_char,t},f.prototype._set_tag_position=function(t,e,n,i,s){n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&!n.is_inline_element&&t.print_newline(!1),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=r(n.tag_check,e)))),o(n.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),n.is_empty_element?("{"===n.tag_start_char&&"else"===n.tag_check&&(this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0,t.current_line_has_match(/{{#if/)||t.print_newline(!1)),"!--"===n.tag_name&&s.type===h.TAG_CLOSE&&i.is_end_tag&&-1===n.text.indexOf("\n")||(n.is_inline_element||n.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n))):n.is_end_tag?(e=!1,e=(e=n.start_tag_token&&n.start_tag_token.multiline_content)||!n.is_inline_element&&!(i.is_inline_element||i.is_unformatted)&&!(s.type===h.TAG_CLOSE&&n.start_tag_token===i)&&"TK_CONTENT"!==s.type,(e=n.is_content_unformatted||n.is_unformatted?!1:e)&&t.print_newline(!1)):(n.indent_content=!n.custom_beautifier_name,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||n.is_unformatted||"TK_CONTENT"===s.type&&!n.is_content_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n))},f.prototype._calcluate_parent_multiline=function(t,e){!e.parent||!t._output.just_added_newline()||(e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element||(e.parent.multiline_content=!0)},["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"]),m=["a","audio","del","ins","map","noscript","video"];f.prototype._do_optional_end_element=function(t){var e,n=null;if(!t.is_empty_element&&t.is_start_tag&&t.parent)return"body"===t.tag_name?n=n||this._tag_stack.try_pop("head"):"li"===t.tag_name?n=n||this._tag_stack.try_pop("li",["ol","ul","menu"]):"dd"===t.tag_name||"dt"===t.tag_name?n=(n=n||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]):"p"===t.parent.tag_name&&-1!==u.indexOf(t.tag_name)?(e=t.parent.parent)&&-1!==m.indexOf(e.tag_name)||(n=n||this._tag_stack.try_pop("p")):"rp"===t.tag_name||"rt"===t.tag_name?n=(n=n||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):"optgroup"===t.tag_name?n=n||this._tag_stack.try_pop("optgroup",["select"]):"option"===t.tag_name?n=n||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===t.tag_name?n=n||this._tag_stack.try_pop("caption",["table"]):"thead"===t.tag_name?n=(n=n||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):"tbody"===t.tag_name||"tfoot"===t.tag_name?n=(n=(n=(n=n||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):"tr"===t.tag_name?n=(n=(n=n||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):"th"!==t.tag_name&&"td"!==t.tag_name||(n=(n=n||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"])),t.parent=this._tag_stack.get_parser_token(),n},t.exports.Beautifier=f},function(t,e,n){var i=n(6).Options;function s(t){i.call(this,t,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}s.prototype=new i,t.exports.Options=s},function(t,e,n){function i(t,e){s.call(this,t,e),this._current_tag_name="";var t=new a(this._input).read_options(this._options),e=new u(this._input);this.__patterns={word:t.until(/[\n\r\t <]/),single_quote:t.until_after(/'/),double_quote:t.until_after(/"/),attribute:t.until(/[\n\r\t =>]|\/>/),element_name:t.until(/[\n\r\t >\/]/),handlebars_comment:e.starting_with(/{{!--/).until_after(/--}}/),handlebars:e.starting_with(/{{/).until_after(/}}/),handlebars_open:e.until(/[\n\r\t }]/),handlebars_raw_close:e.until(/}}/),comment:e.starting_with(/<!--/).until_after(/-->/),cdata:e.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:e.starting_with(/<!\[/).until_after(/]>/),processing:e.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter&&(t=this._input.get_literal_regexp(this._options.unformatted_content_delimiter),this.__patterns.unformatted_content_delimiter=e.matching(t).until_after(t))}var s=n(9).Tokenizer,r=n(9).TOKEN,o=n(13).Directives,a=n(14).TemplatablePattern,u=n(12).Pattern,c={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:r.START,RAW:r.RAW,EOF:r.EOF},_=new o(/<\!--/,/-->/);(i.prototype=new s)._is_comment=function(t){return!1},i.prototype._is_opening=function(t){return t.type===c.TAG_OPEN},i.prototype._is_closing=function(t,e){return t.type===c.TAG_CLOSE&&e&&((">"===t.text||"/>"===t.text)&&"<"===e.text[0]||"}}"===t.text&&"{"===e.text[0]&&"{"===e.text[1])},i.prototype._reset=function(){this._current_tag_name=""},i.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.peek();return null===n?this._create_token(c.EOF,""):this._read_open_handlebars(n,e)||this._read_attribute(n,t,e)||this._read_close(n,e)||this._read_raw_content(n,t,e)||this._read_content_word(n)||this._read_comment_or_cdata(n)||this._read_processing(n)||this._read_open(n,e)||this._create_token(c.UNKNOWN,this._input.next())},i.prototype._read_comment_or_cdata=function(t){var e=null,n=null,i=null;return"<"===t&&("!"===this._input.peek(1)&&((n=this.__patterns.comment.read())?(i=_.get_directives(n))&&"start"===i.ignore&&(n+=_.readIgnored(this._input)):n=this.__patterns.cdata.read()),n)&&((e=this._create_token(c.COMMENT,n)).directives=i),e},i.prototype._read_processing=function(t){var e=null,n=null;return"<"===t&&(n="!"!==(t=this._input.peek(1))&&"?"!==t?n:(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read())&&((e=this._create_token(c.COMMENT,n)).directives=null),e},i.prototype._read_open=function(t,e){var n=null,i=null;return e||"<"===t&&(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),i=this._create_token(c.TAG_OPEN,n)),i},i.prototype._read_open_handlebars=function(t,e){var n=null,i=null;return e||this._options.indent_handlebars&&"{"===t&&"{"===this._input.peek(1)&&(i="!"===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),this._create_token(c.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),this._create_token(c.TAG_OPEN,n))),i},i.prototype._read_close=function(t,e){var n=null,i=null;return e&&("<"===e.text[0]&&(">"===t||"/"===t&&">"===this._input.peek(1))?(n=this._input.next(),"/"===t&&(n+=this._input.next()),i=this._create_token(c.TAG_CLOSE,n)):"{"===e.text[0]&&"}"===t&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),i=this._create_token(c.TAG_CLOSE,"}}"))),i},i.prototype._read_attribute=function(t,e,n){var i=null;return n&&"<"===n.text[0]&&("="===t?i=this._create_token(c.EQUALS,this._input.next()):'"'===t||"'"===t?(n=this._input.next(),n+=('"'===t?this.__patterns.double_quote:this.__patterns.single_quote).read(),i=this._create_token(c.VALUE,n)):(t=this.__patterns.attribute.read())&&(i=e.type===c.EQUALS?this._create_token(c.VALUE,t):this._create_token(c.ATTRIBUTE,t))),i},i.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&(-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},i.prototype._read_raw_content=function(t,e,n){var i="";if(n&&"{"===n.text[0])i=this.__patterns.handlebars_raw_close.read();else if(e.type===c.TAG_CLOSE&&"<"===e.opened.text[0]&&"/"!==e.text[0]){n=e.opened.text.substr(1).toLowerCase();if("script"===n||"style"===n){e=this._read_comment_or_cdata(t);if(e)return e.type=c.TEXT,e;i=this._input.readUntil(new RegExp("</"+n+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(n)&&(i=this._input.readUntil(new RegExp("</"+n+"[\\n\\r\\t ]*?>","ig")))}return i?this._create_token(c.TEXT,i):null},i.prototype._read_content_word=function(t){var e="";if(e=(e=this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]?this.__patterns.unformatted_content_delimiter.read():e)||this.__patterns.word.read())return this._create_token(c.TEXT,e)},t.exports.Tokenizer=i,t.exports.TOKEN=c}],s={};var t=function t(e){var n=s[e];return void 0===n&&(n=s[e]={exports:{}},i[e](n,n.exports,t)),n.exports}(18);e=t}();var e,n,i,s=e;"function"==typeof define&&define.amd?define(["require","./beautify","./beautify-css"],function(t){var n=t("./beautify"),i=t("./beautify-css");return{html_beautify:function(t,e){return s(t,e,n.js_beautify,i.css_beautify)}}}):"undefined"!=typeof exports?(n=require("./beautify.js"),i=require("./beautify-css.js"),exports.html_beautify=function(t,e){return s(t,e,n.js_beautify,i.css_beautify)}):"undefined"!=typeof window?window.html_beautify=function(t,e){return s(t,e,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(t,e){return s(t,e,global.js_beautify,global.css_beautify)})}(),window.RedactorConfigurationSets=window.RedactorConfigurationSets||{},window.MODx||(window.MODx={}),MODx.loadRedactorConfigurationSet=function(t,e){if(t=(t=t||"").split(",").filter(Boolean),console.debug("[Redactor] Initialising configuration set #"+e+" for elements:",t),window.RedactorConfigurationSets[e])for(var n=0;n<t.length;n++)"ta"===t[n]&&window.ContentBlocksWillRenderContent?console.debug("Not initialising Redactor on content field - ContentBlocks is in use."):window.RedactorConfigurationSets[e](t[n]);else console.error('[Redactor] Configuration set with ID "'+e+'" is not available')},MODx.loadRedactorRTE=function(e){var t=window.RedactorConfigurationSet||1;"ta"!==e&&!1!==e||(e=e||"",document.querySelectorAll(".modx-richtext").forEach(function(t){e+=","+t.id})),MODx.loadRedactorConfigurationSet(e,t)};