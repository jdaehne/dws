{"version":3,"sourceRoot":"../../","sources":["js/inputs/gallery.js"],"names":["$","ContentBlocks","fieldTypes","gallery","dom","data","input","imageCount","fileBrowser","source","properties","ContentBlocksConfig","directory","init","this","initUpload","thumbnail_size","length","thumb_size","find","addClass","on","click","proxy","chooseImage","promptImage","MODx","load","xtype","target","targetEl","get","onInsert","val","addImageFromUrl","isArray","images","each","idx","img","id","generated_id","width","height","addImage","sortable","connectWith","forceHelperSize","forcePlaceholderSize","placeholder","tolerance","cursor","update","fixColumnHeights","fireChange","start","event","ui","item","toBoolean","show_description","show_link_field","maxImages","max_images","numImages","alert","_","max","Ext","multiple","listeners","select","imageData","chooseImageCallback","allowedFileTypes","file_types","hideFiles","title","setSource","show","url","fullRelativeUrl","imageId","substr","config","base_url","attr","size","extension","ext","filename","description","link","image_width","image_height","Msg","prompt","btn","ajax","dataType","connector_url","type","beforeSend","xhr","settings","crossDomain","setRequestHeader","siteId","action","field","resource","ContentBlocksResource","context","success","result","urls","removeClass","utilities","normaliseUrls","object","cleanedSrc","message","values","holder","inserted","thumbDisplay","getThumbnailUrl","displaySrc","append","tmpl","fadeOut","remove","initializeLinkField","fileupload","connectorUrl","dropZone","progressInterval","paramName","pasteZone","add","e","files","name","split","pop","domId","window","FileReader","reader","onload","readAsDataURL","setTimeout","submit","done","responseData","record","file","fail","formData","value","request","progress","parseInt","loaded","total","css","getData","$img","$link","linkType","getLinkFieldDataType","push","vcJquery"],"mappings":"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"}